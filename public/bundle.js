var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function s(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let p;function m(t){p=t}const $=[],b=[],v=[],y=[],_=Promise.resolve();let k=!1;function x(t){v.push(t)}function j(){const t=new Set;do{for(;$.length;){const t=$.shift();m(t),O(t.$$)}for(;b.length;)b.pop()();for(let e=0;e<v.length;e+=1){const n=v[e];t.has(n)||(n(),t.add(n))}v.length=0}while($.length);for(;y.length;)y.pop()();k=!1}function O(t){t.fragment&&(t.update(t.dirty),r(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(x))}const w=new Set;function E(t,e){t.$$.dirty||($.push(t),k||(k=!0,_.then(j)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function N(o,l,a,i,u,s){const f=p;m(o);const d=l.props||{},h=o.$$={fragment:null,ctx:null,props:s,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:null};let g=!1;var $,b,v;h.ctx=a?a(o,d,(t,e,n=e)=>(h.ctx&&u(h.ctx[t],h.ctx[t]=n)&&(h.bound[t]&&h.bound[t](n),g&&E(o,t)),e)):d,h.update(),g=!0,r(h.before_update),h.fragment=i(h.ctx),l.target&&(l.hydrate?h.fragment.l((v=l.target,Array.from(v.childNodes))):h.fragment.c(),l.intro&&(($=o.$$.fragment)&&$.i&&(w.delete($),$.i(b))),function(t,n,o){const{fragment:l,on_mount:a,on_destroy:i,after_update:u}=t.$$;l.m(n,o),x(()=>{const n=a.map(e).filter(c);i?i.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(x)}(o,l.target,l.anchor),j()),m(f)}class T{$destroy(){var e,n;n=1,(e=this).$$.fragment&&(r(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function A(t,e,n){const r=Object.create(t);return r.place=e[n],r}function C(t,e,n){const r=Object.create(t);return r.name=e[n],r}function L(t,e,n){const r=Object.create(t);return r.name=e[n],r}function S(t){var e,n,r,c,o,u=t.bag[t.name]+"",h=t.name+"";return{c(){e=s("div"),n=f("You have "),r=f(u),c=d(),o=f(h)},m(t,i){a(t,e,i),l(e,n),l(e,r),l(e,c),l(e,o)},p(t,e){t.bag&&u!==(u=e.bag[e.name]+"")&&g(r,u),t.bag&&h!==(h=e.name+"")&&g(o,h)},d(t){t&&i(e)}}}function Y(t){var e,n,r,c,o,u=t.name+"";function d(){return t.click_handler(t)}return{c(){e=s("div"),n=f("Take "),r=s("button"),c=f(u),o=h(r,"click",d)},m(t,o){a(t,e,o),l(e,n),l(e,r),l(r,c)},p(e,n){t=n,e.things&&u!==(u=t.name+"")&&g(c,u)},d(t){t&&i(e),o()}}}function q(t){var e,n=t.things[t.name]>0&&Y(t);return{c(){n&&n.c(),e=f("")},m(t,r){n&&n.m(t,r),a(t,e,r)},p(t,r){r.things[r.name]>0?n?n.p(t,r):((n=Y(r)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&i(e)}}}function z(t){var e,n,r,c,o,u=t.place+"";function d(){return t.click_handler_1(t)}return{c(){e=s("div"),n=f("Goto "),r=s("button"),c=f(u),o=h(r,"click",d)},m(t,o){a(t,e,o),l(e,n),l(e,r),l(r,c)},p(e,n){t=n,e.places&&u!==(u=t.place+"")&&g(c,u)},d(t){t&&i(e),o()}}}function B(e){var n,r,c,o,h,p,m,$,b,v,y,_,k,x,j,O,w=e.curr.desc+"";let E=Object.keys(e.bag),N=[];for(let t=0;t<E.length;t+=1)N[t]=S(L(e,E,t));let T=Object.keys(e.things),Y=[];for(let t=0;t<T.length;t+=1)Y[t]=q(C(e,T,t));let B=e.places,G=[];for(let t=0;t<B.length;t+=1)G[t]=z(A(e,B,t));return{c(){n=s("div"),r=s("p"),c=f("You are at the "),o=f(e.location),h=f("."),p=d(),m=s("p"),$=f(w),b=f("."),v=d();for(let t=0;t<N.length;t+=1)N[t].c();y=d(),_=s("hr"),k=d(),x=s("hr"),j=d();for(let t=0;t<Y.length;t+=1)Y[t].c();O=d();for(let t=0;t<G.length;t+=1)G[t].c();var t,l,a;t=n,l="class",null==(a="m svelte-1s6zinw")?t.removeAttribute(l):t.setAttribute(l,a)},m(t,e){a(t,n,e),l(n,r),l(r,c),l(r,o),l(r,h),l(n,p),l(n,m),l(m,$),l(m,b),l(n,v);for(let t=0;t<N.length;t+=1)N[t].m(n,null);l(n,y),l(n,_),l(n,k),l(n,x),l(n,j);for(let t=0;t<Y.length;t+=1)Y[t].m(n,null);l(n,O);for(let t=0;t<G.length;t+=1)G[t].m(n,null)},p(t,e){if(t.location&&g(o,e.location),t.curr&&w!==(w=e.curr.desc+"")&&g($,w),t.bag){let r;for(E=Object.keys(e.bag),r=0;r<E.length;r+=1){const c=L(e,E,r);N[r]?N[r].p(t,c):(N[r]=S(c),N[r].c(),N[r].m(n,y))}for(;r<N.length;r+=1)N[r].d(1);N.length=E.length}if(t.things){let r;for(T=Object.keys(e.things),r=0;r<T.length;r+=1){const c=C(e,T,r);Y[r]?Y[r].p(t,c):(Y[r]=q(c),Y[r].c(),Y[r].m(n,O))}for(;r<Y.length;r+=1)Y[r].d(1);Y.length=T.length}if(t.places){let r;for(B=e.places,r=0;r<B.length;r+=1){const c=A(e,B,r);G[r]?G[r].p(t,c):(G[r]=z(c),G[r].c(),G[r].m(n,null))}for(;r<G.length;r+=1)G[r].d(1);G.length=B.length}},i:t,o:t,d(t){t&&i(n),u(N,t),u(Y,t),u(G,t)}}}function G(t,e,n){const r={coin:20},c={},o=t=>{const e={};for(const n of t.split(" "))e[n]=e[n]?e[n]+1:1;return e};n("mud",c.village={places:"river shop farm".split(" "),things:o("coin"),desc:"There is a well here"},c),n("mud",c.shop={places:"village".split(" "),things:o("coin key torch"),desc:"The owner greets you!"},c),n("mud",c.river={places:"farm".split(" "),things:o("coin"),desc:"It is a cold day"},c),n("mud",c.farm={places:"village".split(" "),things:o("coin coin"),desc:"No carrots here"},c);let l="village";const a=t=>{u[t]>0&&(n("bag",r[t]=r[t]?r[t]+1:1,r),n("things",u[t]--,u),n("bag",r))};let i,u,s;return t.$$.update=((t={mud:1,location:1,curr:1})=>{(t.mud||t.location)&&n("curr",i=c[l]),t.curr&&n("things",u=i.things),t.curr&&n("places",s=i.places)}),{bag:r,location:l,take:a,curr:i,things:u,places:s,click_handler:({name:t})=>a(t),click_handler_1:({place:t})=>n("location",l=t)}}return new class extends T{constructor(t){super(),N(this,t,G,B,o,[])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
